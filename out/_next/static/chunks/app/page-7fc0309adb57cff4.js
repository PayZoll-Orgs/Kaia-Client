(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{46830:(e,s,t)=>{"use strict";t.d(s,{PI:()=>a,Sn:()=>r});let a={BACKEND_URL:"https://kaia-server.onrender.com",CHAIN_ID:1001,RPC_URL:"https://public-en-kairos.node.kaia.io",FEE_DELEGATION_URL:"https://fee-delegation-kairos.kaia.io",USDT_ADDRESS:"0x8CCaC8CBE276a225B1Af2b85dEee8e12cFB48193",BULK_PAYROLL_ADDRESS:"0xE9bD986514a6d35B1B73BeA6F19804D3c7aed284",SPLIT_BILLING_ADDRESS:"0x6892D8358bD3EE04a35Ad5844181BDED05dcdf2f",INVOICE_SERVICE_ADDRESS:"0xc70DfAf8d864125D37237fc7B034ACAE1f3397d9",LIFF_ID:"2008110181-oen1dWyd",LINE_CLIENT_ID:"2008110181",LINE_REDIRECT_URI:"https://payzoll-pay.onrender.com/auth/callback",DAPP_PORTAL_CLIENT_ID:"feab7d6b-52d3-4568-ab0f-ad72c35fe884",APP_URL:"https://payzoll-pay.onrender.com"},r={AUTH:{ADD_USER:"/api/auth/addUser",GET_USER:"/api/auth/getUser",SEARCH_USERS:"/api/auth/searchUsers",GET_ALL_USERS:"/api/auth/getAllUsers"},P2P:{RECORD:"/api/p2p/recordP2PTxn",GET_TRANSACTIONS:"/api/p2p/getP2PTxns"},BULK:{RECORD:"/api/bulk/recordBulkTxn",UPDATE_STATUS:"/api/bulk/updateBulkTxnStatus",GET_TRANSACTIONS:"/api/bulk/getBulkTxns"},SPLIT:{RECORD:"/api/split/recordSplitTxn",UPDATE_STATUS:"/api/split/updateSplitTxnStatus",GET_TRANSACTIONS:"/api/split/getSplitTxns",GET_BY_ID:"/api/split/getSplitTxnById"}}},47790:()=>{},54283:()=>{},59137:(e,s,t)=>{Promise.resolve().then(t.bind(t,66955))},66955:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>em});var a=t(95155),r=t(14124),l=t(12115),n=t(13533),i=t(36834),o=t(22441),c=t(88796),d=t(36337),m=t(9252),x=t(53866),u=t(24685),h=t(17332),g=t(20039);function p(e){let{isOpen:s,onClose:t,onScan:n}=e,{isInLineApp:i}=(0,r.A)(),[o,c]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&(console.log("\uD83D\uDD0D LIFFQRScanner Debug:",{isInLineApp:i,userAgent:navigator.userAgent,hasLiff:"liff"in window,currentURL:window.location.href}),console.log("\uD83D\uDD0D UserAgent checks:",{isLINEUserAgent:navigator.userAgent.includes("Line"),isLIFFUserAgent:navigator.userAgent.includes("LIFF"),fullUserAgent:navigator.userAgent}))},[s,i]);let x=async()=>{console.log("\uD83D\uDD0D Attempting QR scan, isInLineApp:",i),i||console.warn("⚠️ LINE app not detected, but attempting scan anyway for debugging"),m(!0),c("");try{console.log("\uD83D\uDE80 Attempting to call LIFFAuth.scanQRCode()..."),"liff"in window?console.log("✅ LIFF object found in window"):console.warn("⚠️ LIFF object not found in window");let e=await g.Oi.scanQRCode();console.log("\uD83D\uDCF1 QR scan completed, result:",e),e?(console.log("✅ QR scan successful:",e),n(e)):console.log("ℹ️ QR scan cancelled or no result"),t()}catch(t){var e,s;console.error("❌ LIFF QR scan error:",t),console.error("\uD83D\uDD0D Error details:",{error:t,message:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:"No stack trace"}),"UNAUTHORIZED"===t.code?c("Camera permission denied"):"INTERNAL_ERROR"===t.code?c("QR scanning failed. Please try again."):(null==(e=t.message)?void 0:e.includes("not available"))?c("QR scanning not available in this environment"):(null==(s=t.message)?void 0:s.includes("not initialized"))?c("LIFF not properly initialized"):c("Failed to scan QR code: ".concat(t.message||"Unknown error"))}finally{m(!1)}};return(0,l.useEffect)(()=>{s&&(c(""),m(!1))},[s]),(0,a.jsx)(u.e,{appear:!0,show:s,as:l.Fragment,children:(0,a.jsxs)(h.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(h.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsx)(h.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"QR Code Scanner"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-2xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),!i&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-yellow-800 text-sm",children:["LINE app detection: ",i?"Detected":"Not detected"]}),(0,a.jsx)("p",{className:"text-yellow-700 text-xs mt-1",children:"Attempting scan anyway for debugging..."})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:i?"Tap the button below to open LINE's QR code scanner":"Attempting to access QR scanner (debug mode)"}),(0,a.jsx)("button",{onClick:x,disabled:d,className:"w-full ".concat(i?"bg-green-500 hover:bg-green-600":"bg-orange-500 hover:bg-orange-600"," disabled:bg-gray-300 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2"),children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Opening Scanner..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),(0,a.jsx)("span",{children:i?"Scan QR Code":"Try QR Scan (Debug)"})]})})]}),o&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800 text-sm",children:o})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-xl border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:t,children:"Cancel"})})]})})})})]})})}var f=t(46830);async function b(e){console.log("\uD83D\uDD0D Getting real USDT balance for:",e);try{let{WalletService:s}=await Promise.resolve().then(t.bind(t,86867)),a=s.getInstance(),r=await a.getTokenBalance(f.PI.USDT_ADDRESS,e),l=parseFloat(r).toFixed(2),n=Math.round(1e18*parseFloat(r)).toString();return console.log("✅ Real USDT balance:",l,"USDT"),console.log("\uD83D\uDD0D Balance details:",{formatted:r,display:l,rawWei:n,decimals:18}),{balance:l,rawBalance:n,decimals:18,symbol:"USDT",contractAddress:f.PI.USDT_ADDRESS}}catch(e){return console.error("❌ Failed to get USDT balance:",e),{balance:"0.00",rawBalance:"0",decimals:6,symbol:"USDT",contractAddress:f.PI.USDT_ADDRESS}}}async function j(e){console.log("\uD83D\uDEB0 Requesting USDT from faucet using LIFF wallet only..."),console.log("\uD83D\uDD0D Wallet address:",e),console.log("\uD83D\uDD0D Target contract:",f.PI.USDT_ADDRESS);try{console.log("\uD83D\uDD04 Skipping gasless service - using LIFF wallet directly");let{WalletService:s}=await Promise.resolve().then(t.bind(t,86867)),a=s.getInstance();console.log("\uD83D\uDD0D Checking wallet connection status...");let r=a.getState();if(console.log("\uD83D\uDCCA Wallet state:",{isConnected:r.isConnected,address:r.address,walletType:r.walletType,isLoading:r.isLoading,error:r.error}),!r.isConnected||!r.address)throw console.error("❌ LIFF wallet not connected:",r),Error("LIFF wallet not connected");r.address.toLowerCase()!==e.toLowerCase()&&console.warn("⚠️ Address mismatch:",{requested:e,connected:r.address});let l="0xde5f72fd";console.log("\uD83D\uDCDD Creating faucet transaction with parameters:",{contract:f.PI.USDT_ADDRESS,methodId:l,methodName:"faucet()",from:r.address,to:f.PI.USDT_ADDRESS,value:"0x0",gasLimit:"0x15f90",data:l}),console.log("\uD83D\uDD0D Contract analysis:"),console.log("  - Contract: MyDummyTokenWithFaucet"),console.log("  - Function: faucet() external"),console.log("  - No parameters required"),console.log("  - Cooldown: 24 hours"),console.log("  - Amount: 100 tokens (with 18 decimals)"),console.log("  - Requires contract to have balance"),console.log("\uD83D\uDE80 Sending faucet transaction through LIFF wallet...");let n=await a.sendTransaction(f.PI.USDT_ADDRESS,"0x0","0x15f90",l);return console.log("✅ LIFF wallet faucet transaction sent successfully!"),console.log("\uD83D\uDCDC Transaction hash:",n),console.log("\uD83D\uDD0D View on Kaiascan:","https://kairos.kaiascope.com/tx/".concat(n)),{success:!0,transactionHash:n,amount:"100.00",gasless:!1}}catch(e){return console.error("❌ Faucet request failed:",e),{success:!1,error:e instanceof Error?e.message:"Faucet request failed",gasless:!1}}}async function v(e,s,a){console.log("\uD83D\uDCB8 Transferring USDT using LIFF wallet only...",{from:e,to:s,amount:a});try{console.log("\uD83D\uDD04 Skipping gasless service - using LIFF wallet directly for P2P transfer");let{WalletService:e}=await Promise.resolve().then(t.bind(t,86867)),r=e.getInstance(),l=r.getState();if(console.log("\uD83D\uDD0D P2P Transfer - Wallet state:",l),!l.isConnected||!l.address)throw Error("LIFF wallet not connected");let n=Math.round(1e18*parseFloat(a));console.log("\uD83D\uDCB0 Amount conversion:",{originalAmount:a,amountInWei:n,decimals:18});let i=s.replace("0x","").toLowerCase().padStart(64,"0"),o=n.toString(16).padStart(64,"0"),c="0xa9059cbb"+i+o;console.log("\uD83D\uDCDD Creating ERC20 transfer transaction:",{contract:f.PI.USDT_ADDRESS,data:c,amountInWei:n});let d=await r.sendTransaction(f.PI.USDT_ADDRESS,"0x0","0x15f90",c);return console.log("✅ LIFF wallet transaction sent:",d),{success:!0,transactionHash:d,gasless:!1}}catch(e){return console.error("❌ USDT transfer failed:",e),{success:!1,error:e instanceof Error?e.message:"Transfer failed",gasless:!1}}}var y=t(43569),N=t(41715),w=t(40707),S=t(6956),k=t(88125);function C(e){let{isOpen:s,onClose:t,currentBalance:n,requiredAmount:i,onBalanceUpdated:o}=e,{wallet:c}=(0,r.A)(),[d,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(null),[h,g]=(0,l.useState)(!1),p=async()=>{if(!c.address)return void u("Wallet not connected");m(!0),u(null);try{let e=await j(c.address);e.success?(g(!0),setTimeout(()=>{o(),t()},3e3)):u(e.error||"Failed to get USDT from faucet")}catch(e){u(e instanceof Error?e.message:"Unknown error")}finally{m(!1)}},f=(parseFloat(i)-parseFloat(n)).toFixed(2);return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-6 h-6 text-amber-500"}),"Insufficient Balance"]}),(0,a.jsx)("button",{onClick:t,disabled:d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-600"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[h?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"USDT Added!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Your balance has been updated. You can now complete your transaction."}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Closing automatically..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-amber-800",children:"Current Balance:"}),(0,a.jsxs)("span",{className:"font-medium text-amber-900",children:[n," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-amber-800",children:"Required:"}),(0,a.jsxs)("span",{className:"font-medium text-amber-900",children:[i," USDT"]})]}),(0,a.jsxs)("div",{className:"border-t border-amber-200 pt-2 flex justify-between",children:[(0,a.jsx)("span",{className:"text-amber-800 font-medium",children:"Need:"}),(0,a.jsxs)("span",{className:"font-bold text-amber-900",children:[f," USDT"]})]})]})}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have enough USDT to complete this transaction. Get free test USDT from the faucet to continue."}),(0,a.jsxs)("button",{onClick:p,disabled:d,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,a.jsx)(w.A,{className:"w-5 h-5"}),d?"Getting USDT...":"Get Free USDT"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"This will add 50 USDT to your testnet balance"})]}),x&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:x})]}),!h&&!d&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center mb-3",children:"Alternative options:"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:t,className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:border-gray-400 transition-colors text-sm font-medium text-gray-700",children:"Cancel Transaction"}),(0,a.jsx)("button",{onClick:()=>{t()},className:"flex-1 py-2 px-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium text-blue-700",children:"Check Portfolio"})]})]})]})]})}):null}function A(e){let{isOpen:s,onClose:t,onSuccess:n}=e,{user:i,wallet:o}=(0,r.A)(),[c,m]=(0,l.useState)("search"),[x,u]=(0,l.useState)(""),[h,g]=(0,l.useState)([]),[p,j]=(0,l.useState)(null),[A,T]=(0,l.useState)(""),[D,F]=(0,l.useState)(!1),[L,E]=(0,l.useState)(null),[I,P]=(0,l.useState)("0"),[U,R]=(0,l.useState)(!1),[B,M]=(0,l.useState)(!1),_=(0,l.useCallback)(async()=>{if(o.address){R(!0);try{let e=await b(o.address);P(e.balance)}catch(e){console.error("Failed to load balance:",e)}finally{R(!1)}}},[o.address]),W=(0,l.useCallback)(async e=>{F(!0);try{console.log("\uD83D\uDD0D Fetching all users from backend...");let s=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.AUTH.GET_ALL_USERS),{method:"GET",headers:{"Content-Type":"application/json"}});if(s.ok){let t=await s.json();console.log("\uD83D\uDCCB Retrieved users:",t.length);let a=t.filter(e=>e.userId!==(null==i?void 0:i.userId));if(e&&e.length>=2){let s=e.toLowerCase();a=a.filter(e=>{var t,a;return(null==(t=e.displayName)?void 0:t.toLowerCase().includes(s))||(null==(a=e.userId)?void 0:a.toLowerCase().includes(s))})}g(a),console.log("✅ Filtered results:",a.length)}else console.error("Failed to fetch users:",s.status),g([])}catch(e){console.error("Error fetching users:",e),g([])}finally{F(!1)}},[null==i?void 0:i.userId]);(0,l.useEffect)(()=>{let e=setTimeout(()=>{W(x)},500);return()=>clearTimeout(e)},[x,W]),(0,l.useEffect)(()=>{s&&(_(),m("search"),u(""),j(null),T(""),E(null),W(""))},[s,_,W]);let O=async()=>{if(!p||!A||!o.address||!(null==i?void 0:i.userId))return void E("Missing payment information");m("processing"),E(null);try{console.log("\uD83D\uDCB8 Executing USDT transfer...",{from:o.address,to:p.walletAddress,amount:A});let e=await v(o.address,p.walletAddress,A);if(!e.success)throw Error(e.error||"Transfer failed");console.log("\uD83D\uDCDD Recording P2P transaction...");let s=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.P2P.RECORD),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:i.userId,receiverId:p.userId,amount:parseFloat(A),transactionHash:e.transactionHash,status:"completed"})});s.ok||console.warn("Failed to record transaction in backend:",s.status),console.log("✅ Payment completed successfully!"),n(e.transactionHash,p,A),t()}catch(e){console.error("❌ Payment failed:",e),E(e instanceof Error?e.message:"Payment failed"),m("confirm")}};return s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["search"!==c&&"processing"!==c&&(0,a.jsx)("button",{onClick:()=>{"amount"===c?(m("search"),j(null)):"confirm"===c&&m("amount"),E(null)},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["search"===c&&"Pay Anyone","amount"===c&&"Enter Amount","confirm"===c&&"Confirm Payment","processing"===c&&"Processing..."]})]}),(0,a.jsx)("button",{onClick:t,disabled:"processing"===c,className:"p-1 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-600"})})]})}),(0,a.jsxs)("div",{className:"p-6",children:["search"===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by username or display name...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[D&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Searching..."})]}),!D&&x&&0===h.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No users found"})]}),h.map(e=>(0,a.jsx)("button",{onClick:()=>{j(e),m("amount"),E(null)},className:"w-full p-3 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden",children:(0,a.jsx)("img",{src:e.pictureUrl||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.displayName),"&background=random"),alt:e.displayName,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.userId]})]})]})},e._id)),!x&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Search for users to send USDT"})]})]})]}),"amount"===c&&p&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 overflow-hidden",children:(0,a.jsx)("img",{src:p.pictureUrl||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(p.displayName),"&background=random"),alt:p.displayName,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:p.displayName}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["@",p.userId]})]})]})}),(0,a.jsx)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-green-800 font-medium",children:"Your USDT Balance:"}),(0,a.jsx)("span",{className:"text-green-800 font-bold",children:U?"Loading...":"".concat(I," USDT")})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Send (USDT)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"0.00",value:A,onChange:e=>{var s;return s=e.target.value,void(/^\d*\.?\d*$/.test(s)&&(T(s),E(null)))},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:["1","5","10","25"].map(e=>(0,a.jsxs)("button",{onClick:()=>T(e),className:"flex-1 py-2 px-3 border border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-sm font-medium",children:[e," USDT"]},e))}),(0,a.jsx)("button",{onClick:()=>{(!A||0>=parseFloat(A)?(E("Please enter a valid amount"),1):parseFloat(A)>parseFloat(I)&&(M(!0),1))||m("confirm")},disabled:!A||0>=parseFloat(A),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Confirmation"})]}),"confirm"===c&&p&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Payment Summary"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"To:"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium",children:p.displayName}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",p.userId]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[A," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Network:"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Kaia Testnet"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Gas Fee:"}),(0,a.jsx)("span",{className:"text-green-600",children:"Free (Fee Delegated)"})]})]})]}),(0,a.jsxs)("button",{onClick:O,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5"}),"Confirm Payment"]})]}),"processing"===c&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Payment..."}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Please wait while we process your USDT transfer to ",null==p?void 0:p.displayName]})]}),L&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:L})]})]})]}),(0,a.jsx)(C,{isOpen:B,onClose:()=>M(!1),currentBalance:I,requiredAmount:A,onBalanceUpdated:_})]}):null}var T=t(12834),D=t(46724),F=t(76799);function L(e){let{isOpen:s,onClose:t,onSuccess:n}=e,{user:i,wallet:o}=(0,r.A)(),[d,x]=(0,l.useState)("scan"),[u,h]=(0,l.useState)(null),[g,p]=(0,l.useState)(""),[j,N]=(0,l.useState)(""),[A,L]=(0,l.useState)(""),[E,I]=(0,l.useState)(""),[P,U]=(0,l.useState)(!1),[R,B]=(0,l.useState)(null),[M,_]=(0,l.useState)("0"),[W,O]=(0,l.useState)(!1),[z,G]=(0,l.useState)(!1),[Q,K]=(0,l.useState)(!1),H=(0,l.useCallback)(async()=>{if(o.address){O(!0);try{let e=await b(o.address);_(e.balance)}catch(e){console.error("Failed to load balance:",e)}finally{O(!1)}}},[o.address]);(0,l.useEffect)(()=>{s&&(H(),x("scan"),h(null),p(""),N(""),L(""),I(""),B(null),K(!1))},[s,H]);let J=()=>({type:"kaiapay_payment",recipientAddress:o.address||"",recipientName:(null==i?void 0:i.displayName)||"KaiaPay User",amount:A||"",currency:"USDT",message:E||""}),q=async()=>{if(!u||!g||!o.address||!(null==i?void 0:i.userId))return void B("Missing payment information");if(!g||0>=parseFloat(g)?(B("Please enter a valid amount"),!1):!(parseFloat(g)>parseFloat(M))||(G(!0),!1)){x("processing"),B(null);try{console.log("\uD83D\uDCB8 Executing QR payment...",{from:o.address,to:u.recipientAddress,amount:g});let e=await v(o.address,u.recipientAddress,g);if(!e.success)throw Error(e.error||"Transfer failed");console.log("\uD83D\uDCDD Recording QR payment transaction...");let s=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.P2P.RECORD),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:i.userId,receiverId:u.recipientAddress,amount:parseFloat(g),transactionHash:e.transactionHash,status:"completed"})});s.ok||console.warn("Failed to record QR payment in backend:",s.status),console.log("✅ QR payment completed successfully!");let a={displayName:u.recipientName||"Address ".concat(u.recipientAddress.slice(0,6),"..."),walletAddress:u.recipientAddress};n(e.transactionHash,a,g),t()}catch(e){console.error("❌ QR payment failed:",e),B(e instanceof Error?e.message:"Payment failed"),x("pay")}}},$=async()=>{try{let e=JSON.stringify(J(),null,2);await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy QR data:",e)}},V=async()=>{try{let e=J(),s="Pay me ".concat(e.amount?e.amount+" USDT":"with USDT"," on KaiaPay: ").concat(JSON.stringify(e));navigator.share?await navigator.share({title:"KaiaPay Payment Request",text:s}):await navigator.clipboard.writeText(s)}catch(e){console.error("Failed to share QR data:",e)}};return s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-6 h-6 text-blue-600"}),"QR Pay"]}),(0,a.jsx)("button",{onClick:t,disabled:"processing"===d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-600"})})]})}),("scan"===d||"generate"===d)&&(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>x("scan"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("scan"===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Scan QR"}),(0,a.jsx)("button",{onClick:()=>x("generate"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("generate"===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Generate QR"})]})}),(0,a.jsxs)("div",{className:"p-6",children:["scan"===d&&(0,a.jsx)("div",{className:"space-y-4",children:Q?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(D.Lp,{onScan:e=>{e&&e.length>0&&(e=>{try{var s;let t;console.log("QR data scanned:",e);try{t=JSON.parse(e)}catch(s){if(e.startsWith("0x")&&42===e.length)t={type:"kaiapay_payment",recipientAddress:e,currency:"USDT"};else throw Error("Invalid QR code format")}if("kaiapay_payment"!==t.type||!t.recipientAddress)throw Error("Invalid payment QR code");if(t.recipientAddress.toLowerCase()===(null==(s=o.address)?void 0:s.toLowerCase()))throw Error("Cannot send payment to yourself");h(t),p(t.amount||""),N(t.message||""),x("pay"),K(!1),B(null)}catch(e){console.error("QR scan error:",e),B(e instanceof Error?e.message:"Failed to process QR code")}})(e[0].rawValue)},components:{finder:!0},styles:{container:{width:"100%",maxWidth:"300px",margin:"0 auto"}}})}),(0,a.jsx)("button",{onClick:()=>K(!1),className:"w-full py-2 px-4 border border-gray-300 rounded-lg hover:border-gray-400 transition-colors text-sm font-medium text-gray-700",children:"Close Scanner"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Position the QR code within the frame to scan"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Scan Payment QR"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Scan a QR code to send USDT payment"}),(0,a.jsx)("button",{onClick:()=>K(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Open Camera"})]})}),"generate"===d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 inline-block",children:(0,a.jsx)(T.X,{value:JSON.stringify(J()),size:200,level:"M",includeMargin:!0})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Amount (Optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"0.00",value:A,onChange:e=>{/^\d*\.?\d*$/.test(e.target.value)&&L(e.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (Optional)"}),(0,a.jsx)("input",{type:"text",placeholder:"Payment for...",value:E,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:$,className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-lg hover:border-gray-400 transition-colors text-sm font-medium text-gray-700",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),"Copy"]}),(0,a.jsxs)("button",{onClick:V,className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors text-sm font-medium text-blue-700",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),"Share"]})]})]})]}),"pay"===d&&u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:u.recipientName||"Unknown Recipient"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 font-mono",children:[u.recipientAddress.slice(0,8),"...",u.recipientAddress.slice(-6)]})]})]}),u.message&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-white rounded border border-blue-200",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:u.message})})]}),(0,a.jsx)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-green-800 font-medium",children:"Your USDT Balance:"}),(0,a.jsx)("span",{className:"text-green-800 font-bold",children:W?"Loading...":"".concat(M," USDT")})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Pay (USDT)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"0.00",value:g,onChange:e=>{var s;return s=e.target.value,void(/^\d*\.?\d*$/.test(s)&&(p(s),B(null)))},disabled:!!u.amount,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg disabled:bg-gray-100"})]}),u.amount&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Amount preset by QR code"})]}),(0,a.jsxs)("button",{onClick:q,disabled:!g||0>=parseFloat(g),className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5"}),"Pay ",g," USDT"]})]}),"processing"===d&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Payment..."}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please wait while we process your QR payment"})]}),R&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:R})]})]})]}),(0,a.jsx)(C,{isOpen:z,onClose:()=>G(!1),currentBalance:M,requiredAmount:g,onBalanceUpdated:H})]}):null}var E=t(57218),I=t(9554);function P(e){let{isOpen:s,onClose:n,onSuccess:i}=e,{user:o,wallet:c}=(0,r.A)(),[d,m]=(0,l.useState)("create"),[x,u]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[p,j]=(0,l.useState)(""),[v,N]=(0,l.useState)([]),[A,T]=(0,l.useState)("equal"),[D,F]=(0,l.useState)(""),[L,P]=(0,l.useState)(null),[U,R]=(0,l.useState)(!1),[B,M]=(0,l.useState)([]),[_,W]=(0,l.useState)(!1),[O,z]=(0,l.useState)(new Set),[G,Q]=(0,l.useState)(!1),[K,H]=(0,l.useState)("0"),[J,q]=(0,l.useState)(!1),[$,V]=(0,l.useState)(!1),Y=(0,l.useCallback)(async()=>{if(c.address){q(!0);try{let e=await b(c.address);H(e.balance)}catch(e){console.error("Failed to load balance:",e)}finally{q(!1)}}},[c.address]),X=(0,l.useCallback)(async()=>{W(!0);try{let e=await fetch("".concat(f.PI.BACKEND_URL,"/api/auth/getAllUsers"));if(e.ok){let s=(await e.json()).filter(e=>{var s;return e.walletAddress.toLowerCase()!==(null==(s=c.address)?void 0:s.toLowerCase())});M(s)}else console.error("Failed to fetch users:",e.status),P("Failed to load users")}catch(e){console.error("Error fetching users:",e),P("Failed to load users")}finally{W(!1)}},[c.address]);(0,l.useEffect)(()=>{s&&(Y(),X(),m("create"),u(""),g(""),j(""),N([]),T("equal"),F(""),P(null),z(new Set),Q(!1))},[s,Y,X]),(0,l.useEffect)(()=>{if("equal"===A&&p&&v.length>0){let e=(parseFloat(p)/v.length).toFixed(2);N(s=>s.map(s=>({...s,amount:e})))}},[p,v.length,A]);let Z=e=>{if(P(null),"create"===e)return x.trim()?!(!p||0>=parseFloat(p))||(P("Please enter a valid total amount"),!1):(P("Please enter a bill title"),!1);if("participants"===e){if(0===v.length)return P("Please add at least one participant"),!1;let e=v.reduce((e,s)=>e+parseFloat(s.amount||"0"),0),s=parseFloat(p);if(Math.abs(e-s)>.01)return P("Participant amounts (".concat(e.toFixed(2),") don't match total (").concat(s.toFixed(2),")")),!1}return!0},ee=()=>{"create"===d&&Z("create")?m("participants"):"participants"===d&&Z("participants")&&m("review")},es=async()=>{if(!c.address||!(null==o?void 0:o.userId))return void P("Wallet not connected");m("processing"),P(null);try{console.log("\uD83D\uDCDD Creating split bill...",{title:x,description:h,totalAmount:p,participants:v.length,creator:c.address});let e=v.map(e=>e.address),s=v.map(e=>(1e18*parseFloat(e.amount)).toString()),a=D?Math.floor(new Date(D).getTime()/1e3):Math.floor(Date.now()/1e3)+604800;console.log("\uD83D\uDD17 Calling SplitBilling contract...",{payee:c.address,debtors:e,amounts:s,token:"0x8CCaC8CBE276a225B1Af2b85dEee8e12cFB48193",deadline:a,description:h||x}),console.log("⚠️  Using simplified contract interaction"),console.log("\uD83D\uDCDD Split bill parameters:",{totalAmount:p,participantCount:v.length,hasDeadline:!!D});let{WalletService:r}=await Promise.resolve().then(t.bind(t,86867)),l=r.getInstance();console.log("\uD83D\uDCE4 Sending transaction to SplitBilling contract...");let d=await l.sendTransaction("0x6892D8358bD3EE04a35Ad5844181BDED05dcdf2f","0x0","0x30d40","0x12345678");console.log("\uD83D\uDCE6 Transaction sent:",d);let m="split_".concat(d.slice(2,10));console.log("✅ Split bill created successfully!",{splitId:m,transactionHash:d});let u={id:m,title:x,description:h,totalAmount:p,participants:v,creator:o.userId,createdAt:new Date,deadline:D?new Date(D):void 0},g=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.SPLIT.RECORD),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({billId:m,creatorId:o.userId,participants:v.map(e=>({userId:e.address,amount:parseFloat(e.amount),paid:!1})),totalAmount:parseFloat(p),description:h,currency:"USDT",status:"active"})});g.ok||console.warn("Failed to record split bill in backend:",g.status),console.log("\uD83D\uDCCA Split bill recorded in backend"),i(u),n()}catch(e){console.error("❌ Split bill creation failed:",e),P(e instanceof Error?e.message:"Failed to create split bill"),m("review")}};return s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["create"!==d&&"processing"!==d&&(0,a.jsx)("button",{onClick:()=>{"participants"===d?m("create"):"review"===d&&m("participants"),P(null)},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["create"===d&&"Create Split Bill","participants"===d&&"Add Participants","review"===d&&"Review & Create","processing"===d&&"Creating..."]})]}),(0,a.jsx)("button",{onClick:n,disabled:"processing"===d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-600"})})]})}),(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:["create","participants","review"].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(d===e?"bg-blue-600 text-white":s<["create","participants","review"].indexOf(d)?"bg-green-600 text-white":"bg-gray-200 text-gray-500"),children:s<["create","participants","review"].indexOf(d)?(0,a.jsx)(S.A,{className:"w-5 h-5"}):s+1}),s<2&&(0,a.jsx)("div",{className:"w-12 h-0.5 mx-2 ".concat(s<["create","participants","review"].indexOf(d)?"bg-green-600":"bg-gray-200")})]},e))})}),(0,a.jsxs)("div",{className:"p-6 max-h-96 overflow-y-auto",children:["create"===d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bill Title *"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g., Dinner at Restaurant",value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{placeholder:"Optional description...",value:h,onChange:e=>g(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Amount (USDT) *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"0.00",value:p,onChange:e=>{var s;return s=e.target.value,void(/^\d*\.?\d*$/.test(s)&&(j(s),P(null)))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Deadline (Optional)"}),(0,a.jsx)("input",{type:"date",value:D,onChange:e=>F(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsx)("button",{onClick:ee,disabled:!x.trim()||!p,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Add Participants"})]}),"participants"===d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Split Method"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>T("equal"),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-colors ".concat("equal"===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Equal Split"}),(0,a.jsx)("button",{onClick:()=>T("custom"),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-colors ".concat("custom"===A?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Custom Amounts"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Add Participants"}),(0,a.jsx)("button",{type:"button",onClick:()=>Q(!G),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:G?"Cancel":"Select Users"})]}),G&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-2",children:0===B.length?(0,a.jsx)("div",{className:"text-gray-500 text-center py-2",children:_?"Loading users...":"No users available"}):B.filter(e=>{var s;return e.walletAddress.toLowerCase()!==(null==(s=c.address)?void 0:s.toLowerCase())}).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border",children:[(0,a.jsx)("input",{type:"checkbox",id:"user-".concat(e._id),checked:O.has(e._id),onChange:()=>(e=>{let s=new Set(O);s.has(e)?s.delete(e):s.add(e),z(s)})(e._id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsxs)("label",{htmlFor:"user-".concat(e._id),className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.walletAddress})]})]},e._id))}),O.size>0&&(0,a.jsxs)("button",{type:"button",onClick:()=>{let e=B.filter(e=>O.has(e._id));if(0===e.length)return void P("Please select at least one user");let s=e.map(e=>({id:e._id,userId:e.userId,address:e.walletAddress,name:e.displayName,amount:"0",paid:!1}));N(e=>[...e,...s]),z(new Set),Q(!1),P(null)},className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-4 h-4"}),"Add ",O.size," Selected User",O.size>1?"s":""]})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900",children:["Participants (",v.length,")"]}),v.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),"custom"===A?(0,a.jsx)("input",{type:"text",value:e.amount,onChange:s=>{var t,a;return t=e.id,a=s.target.value,void(/^\d*\.?\d*$/.test(a)&&N(e=>e.map(e=>e.id===t?{...e,amount:a}:e)))},className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm text-center",placeholder:"0.00"}):(0,a.jsxs)("span",{className:"text-sm font-medium",children:[e.amount," USDT"]}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void N(e=>e.filter(e=>e.id!==s))},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})})]},e.id)),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Total:"}),(0,a.jsxs)("span",{className:"font-bold text-blue-900",children:[v.reduce((e,s)=>e+parseFloat(s.amount||"0"),0).toFixed(2)," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-blue-700",children:"Expected:"}),(0,a.jsxs)("span",{className:"text-blue-800",children:[p," USDT"]})]})]})]}),(0,a.jsx)("button",{onClick:ee,disabled:0===v.length,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Review & Create"})]}),"review"===d&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Bill Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Title:"}),(0,a.jsx)("span",{className:"font-medium",children:x})]}),h&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Description:"}),(0,a.jsx)("span",{className:"font-medium",children:h})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[p," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Participants:"}),(0,a.jsx)("span",{className:"font-medium",children:v.length})]}),D&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Deadline:"}),(0,a.jsx)("span",{className:"font-medium",children:new Date(D).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Payment Breakdown"}),v.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 border border-gray-200 rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.amount," USDT"]})]},e.id))]}),(0,a.jsxs)("button",{onClick:es,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5"}),"Create Split Bill"]})]}),"processing"===d&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Creating Split Bill..."}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please wait while we create your split bill on the blockchain"})]}),L&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:L})]})]})]}),(0,a.jsx)(C,{isOpen:$,onClose:()=>V(!1),currentBalance:K,requiredAmount:"0",onBalanceUpdated:Y})]}):null}function U(e){let{isOpen:s,onClose:n,onSuccess:i}=e,{user:o,wallet:c}=(0,r.A)(),[m,u]=(0,l.useState)("select"),[h,g]=(0,l.useState)([]),[p,j]=(0,l.useState)("0"),[v,N]=(0,l.useState)(null),[w,A]=(0,l.useState)(!1),[T,D]=(0,l.useState)([]),[F,L]=(0,l.useState)(!1),[P,U]=(0,l.useState)(new Set),[R,B]=(0,l.useState)("0"),[M,_]=(0,l.useState)(!1),[W,O]=(0,l.useState)(!1),z="0xE9bD986514a6d35B1B73BeA6F19804D3c7aed284",G="0x8CCaC8CBE276a225B1Af2b85dEee8e12cFB48193",Q=(0,l.useCallback)(async()=>{if(c.address){_(!0);try{let e=await b(c.address);B(e.balance)}catch(e){console.error("Failed to load balance:",e)}finally{_(!1)}}},[c.address]),K=(0,l.useCallback)(async()=>{L(!0);try{let e=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.AUTH.GET_ALL_USERS));if(e.ok){let s=(await e.json()).filter(e=>{var s;return e.walletAddress.toLowerCase()!==(null==(s=c.address)?void 0:s.toLowerCase())});D(s)}else console.error("Failed to fetch users:",e.status),N("Failed to load users")}catch(e){console.error("Error fetching users:",e),N("Failed to load users")}finally{L(!1)}},[c.address]);(0,l.useEffect)(()=>{s&&(Q(),K(),u("select"),g([]),j("0"),N(null),U(new Set))},[s,Q,K]),(0,l.useEffect)(()=>{j(h.reduce((e,s)=>e+parseFloat(s.amount||"0"),0).toFixed(6))},[h]);let H=e=>{if(N(null),"select"===e)return 0!==h.length||(N("Please add at least one recipient"),!1);if("amounts"===e){if(h.some(e=>!e.amount||0>=parseFloat(e.amount)))return N("Please enter valid amounts for all recipients"),!1;if(parseFloat(p)>parseFloat(R))return O(!0),!1}return!0},J=()=>{"select"===m&&H("select")?u("amounts"):"amounts"===m&&H("amounts")&&u("review")},q=async()=>{if(!c.address||!(null==o?void 0:o.userId))return void N("Wallet not connected");u("processing"),N(null);try{console.log("\uD83D\uDCB0 Executing bulk payment...",{recipientCount:h.length,totalAmount:p,from:c.address});let e=h.map(e=>e.address),s=h.map(e=>Math.round(1e18*parseFloat(e.amount)).toString());console.log("\uD83D\uDCCA Contract call parameters:",{contract:z,usdtToken:G,recipients:e,amounts:s,totalAmountWei:s.reduce((e,s)=>e+BigInt(s),BigInt(0)).toString()});let{WalletService:a}=await Promise.resolve().then(t.bind(t,86867)),r=a.getInstance();console.log("\uD83D\uDD13 Approving USDT spending for BulkPayroll contract...");let l=s.reduce((e,s)=>e+BigInt(s),BigInt(0)),d="095ea7b3",m=z.slice(2).padStart(64,"0"),x=l.toString(16).padStart(64,"0"),u="0x"+d+m+x;console.log("\uD83D\uDCDD Approve transaction data:",{selector:d,spender:z,amount:l.toString(),data:u});let g=await r.sendTransaction(G,"0x0","0x15f90",u);console.log("✅ USDT approval successful:",g),console.log("\uD83D\uDCE6 Executing bulk transfer...");let b=h.map(e=>e.address),j=h.map(e=>BigInt(Math.floor(1e18*parseFloat(e.amount))).toString()),v=function(e,s){let t=e.length,a=s.length,r=e.map(e=>e.toLowerCase().replace("0x","").padStart(64,"0")),l=s.map(e=>BigInt(e).toString(16).padStart(64,"0")),n=(96+32*t).toString(16).padStart(64,"0"),i=t.toString(16).padStart(64,"0"),o=r.join(""),c=a.toString(16).padStart(64,"0");return"0x0000000000000000000000000000000000000000000000000000000000000040"+n+i+o+c+l.join("")}(b,j),y="0x153a1f3e"+v.slice(2);console.log("\uD83D\uDCE6 Executing bulk transfer with proper ABI encoding"),console.log("\uD83D\uDCCA Transaction summary:",{recipientCount:h.length,totalAmount:p,gasEstimate:"0x30d40",callData:y.slice(0,42)+"..."});let N=await r.sendTransaction(z,"0x0","0x30d40",y);console.log("✅ Bulk payment transaction sent:",N),console.log("\uD83D\uDCDD Recording bulk payment in backend...");let w={id:"bulk_".concat(N.slice(2,10)),recipients:h,totalAmount:p,transactionHash:N,createdAt:new Date},S=await fetch("".concat(f.PI.BACKEND_URL).concat(f.Sn.BULK.RECORD),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payerId:o.userId,recipients:h.map(e=>({userId:e.userId,amount:parseFloat(e.amount)})),totalAmount:parseFloat(p),currency:"USDT",contractAddress:z,transactionHash:N,status:"completed"})});S.ok||console.warn("Failed to record bulk payment in backend:",S.status),console.log("\uD83C\uDF89 Bulk payment completed successfully!"),i(w),n()}catch(e){console.error("❌ Bulk payment failed:",e),N(e instanceof Error?e.message:"Bulk payment failed"),u("review")}};return s?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["select"!==m&&"processing"!==m&&(0,a.jsx)("button",{onClick:()=>{"amounts"===m?u("select"):"review"===m&&u("amounts"),N(null)},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-6 h-6 text-blue-600"}),"select"===m&&"Select Recipients","amounts"===m&&"Set Amounts","review"===m&&"Review Payment","processing"===m&&"Processing..."]})]}),(0,a.jsx)("button",{onClick:n,disabled:"processing"===m,className:"p-1 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-gray-600"})})]})}),(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:["select","amounts","review"].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(m===e?"bg-blue-600 text-white":s<["select","amounts","review"].indexOf(m)?"bg-green-600 text-white":"bg-gray-200 text-gray-500"),children:s<["select","amounts","review"].indexOf(m)?(0,a.jsx)(S.A,{className:"w-5 h-5"}):s+1}),s<2&&(0,a.jsx)("div",{className:"w-12 h-0.5 mx-2 ".concat(s<["select","amounts","review"].indexOf(m)?"bg-green-600":"bg-gray-200")})]},e))})}),(0,a.jsxs)("div",{className:"p-6 max-h-96 overflow-y-auto",children:["select"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Available Users"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[P.size," selected"]})]}),(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2 border border-gray-200 rounded-lg p-3",children:F?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Loading users..."})]}):0===T.length?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(d.A,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No users available"})]}):T.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded border",children:[(0,a.jsx)("input",{type:"checkbox",id:"user-".concat(e._id),checked:P.has(e._id),onChange:()=>(e=>{let s=new Set(P);s.has(e)?s.delete(e):s.add(e),U(s)})(e._id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsxs)("label",{htmlFor:"user-".concat(e._id),className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 font-mono",children:[e.walletAddress.slice(0,8),"...",e.walletAddress.slice(-6)]})]})]},e._id))}),P.size>0&&(0,a.jsxs)("button",{onClick:()=>{let e=T.filter(e=>P.has(e._id));if(0===e.length)return void N("Please select at least one user");let s=e.map(e=>({id:e._id,userId:e.userId,address:e.walletAddress,name:e.displayName,amount:"0"}));g(e=>[...e,...s]),U(new Set),N(null)},className:"w-full mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-4 h-4"}),"Add ",P.size," Selected User",P.size>1?"s":""]})]}),h.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900",children:["Recipients (",h.length,")"]}),h.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void g(e=>e.filter(e=>e.id!==s))},className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})})]},e.id))]}),(0,a.jsx)("button",{onClick:J,disabled:0===h.length,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Set Amounts"})]}),"amounts"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-green-800 font-medium",children:"Your USDT Balance:"}),(0,a.jsx)("span",{className:"text-green-800 font-bold",children:M?"Loading...":"".concat(R," USDT")})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Set Payment Amounts"}),h.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),(0,a.jsx)("div",{className:"w-24",children:(0,a.jsx)("input",{type:"text",value:e.amount,onChange:s=>{var t,a;return t=e.id,a=s.target.value,void(/^\d*\.?\d*$/.test(a)&&g(e=>e.map(e=>e.id===t?{...e,amount:a}:e)))},placeholder:"0.00",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})})]},e.id))]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Total Amount:"}),(0,a.jsxs)("span",{className:"font-bold text-blue-900",children:[p," USDT"]})]})}),(0,a.jsx)("button",{onClick:J,disabled:h.some(e=>!e.amount||0>=parseFloat(e.amount)),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Review Payment"})]}),"review"===m&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Payment Summary"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Recipients:"}),(0,a.jsx)("span",{className:"font-medium",children:h.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[p," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Network:"}),(0,a.jsx)("span",{className:"font-medium",children:"Kaia Testnet"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Contract:"}),(0,a.jsx)("span",{className:"text-xs font-mono",children:"BulkPayroll"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Payment Breakdown"}),(0,a.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:h.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 border border-gray-200 rounded text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:[e.address.slice(0,8),"...",e.address.slice(-6)]})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.amount," USDT"]})]},e.id))})]}),(0,a.jsxs)("button",{onClick:q,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5"}),"Execute Bulk Payment"]})]}),"processing"===m&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing Bulk Payment..."}),(0,a.jsx)("p",{className:"text-gray-500",children:"Approving USDT spending and executing bulk transfer..."})]}),v&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:v})]})]})]}),(0,a.jsx)(C,{isOpen:W,onClose:()=>O(!1),currentBalance:R,requiredAmount:p,onBalanceUpdated:Q})]}):null}var R=t(15239);let B=[{id:"1",name:"Arnav Saikia",walletAddress:"0x1234567890abcdef1234567890abcdef12345678",profilePhoto:"/next.svg",phoneNumber:"+91 82992 24950",lastTransaction:{amount:20,date:"30 Aug, 9:02 pm",type:"received"}},{id:"2",name:"Sarah Johnson",walletAddress:"0xabcdef1234567890abcdef1234567890abcdef12",profilePhoto:"/next.svg",phoneNumber:"+91 98765 43210",lastTransaction:{amount:150,date:"25 Aug, 2:30 pm",type:"sent"}},{id:"3",name:"Mike Chen",walletAddress:"0x9876543210fedcba9876543210fedcba98765432",profilePhoto:"/next.svg",phoneNumber:"+91 87654 32109",lastTransaction:{amount:75,date:"20 Aug, 11:15 am",type:"received"}}];function M(e){let{isOpen:s,onClose:t,onSelectContact:r}=e,[n,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(B);return(0,a.jsx)(u.e,{appear:!0,show:s,as:l.Fragment,children:(0,a.jsxs)(h.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(h.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)(h.lG.Title,{as:"h2",className:"text-gray-900 text-xl font-bold",children:"Pay Anyone"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, wallet address, or phone",value:n,onChange:e=>{var s;i(s=e.target.value),c(B.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.walletAddress.toLowerCase().includes(s.toLowerCase())||e.phoneNumber.includes(s)))},className:"w-full bg-gray-50 text-gray-900 pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none"})]})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-96",children:0===o.length?(0,a.jsx)("div",{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No contacts found"})}):(0,a.jsx)("div",{className:"p-6 space-y-3",children:o.map(e=>(0,a.jsx)("div",{onClick:()=>{r(e)},className:"bg-gray-50 rounded-xl p-4 cursor-pointer hover:bg-green-50 transition-colors border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:e.profilePhoto,alt:e.name,width:24,height:24,className:"rounded-full"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-gray-900 font-medium truncate",children:e.name}),(0,a.jsx)("p",{className:"text-gray-500 text-sm truncate",children:e.phoneNumber}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs font-mono truncate",children:[e.walletAddress.slice(0,10),"...",e.walletAddress.slice(-8)]})]}),e.lastTransaction&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium ".concat("sent"===e.lastTransaction.type?"text-red-500":"text-green-500"),children:["sent"===e.lastTransaction.type?"-":"+","₹",e.lastTransaction.amount]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:e.lastTransaction.date})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id))})})]})})})})]})})}let _=[{id:"1",amount:20,date:"30 Aug, 9:02 pm",type:"received",message:"Payment to you",status:"paid"},{id:"2",amount:30,date:"2 Apr, 9:14 am",type:"sent",message:"Payment to Arnav",status:"paid"},{id:"3",amount:50,date:"10 Jan, 5:59 pm",type:"sent",message:"Payment to Arnav",status:"paid"}];function W(e){let{isOpen:s,onClose:t,contact:r,onPay:n,onRequest:i}=e,[o,c]=(0,l.useState)("");return r?(0,a.jsx)(u.e,{appear:!0,show:s,as:l.Fragment,children:(0,a.jsxs)(h.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(h.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:r.profilePhoto,alt:r.name,width:24,height:24,className:"rounded-full"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-gray-900 text-lg font-bold",children:r.name}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:r.phoneNumber})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"space-y-4",children:_.map(e=>(0,a.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ".concat("received"===e.type?"bg-green-100":"bg-red-100"),children:"received"===e.type?(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}):(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-gray-900 font-medium truncate",children:e.message}),(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:e.date}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-green-500 text-xs",children:["Paid • ",e.date.split(",")[0]]})]})]}),(0,a.jsx)("div",{className:"text-right flex-shrink-0 ml-2",children:(0,a.jsxs)("div",{className:"text-lg font-bold ".concat("received"===e.type?"text-green-500":"text-red-500"),children:["received"===e.type?"+":"-","₹",e.amount]})}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id))})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,a.jsx)("button",{onClick:()=>n(r),className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Pay"}),(0,a.jsx)("button",{onClick:()=>i(r),className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Request"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Message...",value:o,onChange:e=>c(e.target.value),className:"flex-1 bg-gray-50 text-gray-900 px-4 py-3 rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none"}),(0,a.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]})})})})]})}):null}let O=[{id:"1",name:"Arnav Saikia",walletAddress:"0x1234567890abcdef1234567890abcdef12345678",profilePhoto:"/next.svg",phoneNumber:"+91 82992 24950"},{id:"2",name:"Sarah Johnson",walletAddress:"0xabcdef1234567890abcdef1234567890abcdef12",profilePhoto:"/next.svg",phoneNumber:"+91 98765 43210"},{id:"3",name:"Mike Chen",walletAddress:"0x9876543210fedcba9876543210fedcba98765432",profilePhoto:"/next.svg",phoneNumber:"+91 87654 32109"},{id:"4",name:"Emma Wilson",walletAddress:"0x5555555555555555555555555555555555555555",profilePhoto:"/next.svg",phoneNumber:"+91 76543 21098"}];function z(e){let{isOpen:s,onClose:t,onConfirmSplit:r}=e,[n,i]=(0,l.useState)("select"),[o,c]=(0,l.useState)([]),[d,m]=(0,l.useState)(0),[x,g]=(0,l.useState)(""),p=O.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.walletAddress.toLowerCase().includes(x.toLowerCase())||e.phoneNumber.includes(x)),f=o.reduce((e,s)=>e+s.amount,0),b=.01>Math.abs(f-d);return(0,a.jsx)(u.e,{appear:!0,show:s,as:l.Fragment,children:(0,a.jsxs)(h.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(h.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)(h.lG.Title,{as:"h2",className:"text-gray-900 text-xl font-bold",children:["select"===n&&"Select People","preview"===n&&"Preview Selection","amount"===n&&"Split Amount"]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),"select"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search people...",value:x,onChange:e=>g(e.target.value),className:"w-full bg-gray-50 text-gray-900 pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none"})]})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-96 p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:p.map(e=>{let s=o.some(s=>s.id===e.id);return(0,a.jsx)("div",{onClick:()=>{o.some(s=>s.id===e.id)?c(s=>s.filter(s=>s.id!==e.id)):c(s=>[...s,{...e,amount:0,isCustomAmount:!1}])},className:"bg-gray-50 rounded-xl p-4 cursor-pointer transition-colors border ".concat(s?"ring-2 ring-green-500 bg-green-50 border-green-200":"hover:bg-green-50 border-gray-100"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:e.profilePhoto,alt:e.name,width:24,height:24,className:"rounded-full"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-gray-900 font-medium truncate",children:e.name}),(0,a.jsx)("p",{className:"text-gray-500 text-sm truncate",children:e.phoneNumber})]}),s&&(0,a.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},e.id)})})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:()=>{0!==o.length&&i("preview")},disabled:0===o.length,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg font-medium transition-colors",children:["Preview Selection (",o.length,")"]})})]}),"preview"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-y-auto max-h-96 p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,a.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:e.profilePhoto,alt:e.name,width:24,height:24,className:"rounded-full"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-gray-900 font-medium truncate",children:e.name}),(0,a.jsx)("p",{className:"text-gray-500 text-sm truncate",children:e.phoneNumber})]}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void c(e=>e.filter(e=>e.id!==s))},className:"text-red-500 hover:text-red-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id))})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200 space-y-3",children:[(0,a.jsx)("button",{onClick:()=>{i("select")},className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-medium transition-colors",children:"Back to Selection"}),(0,a.jsx)("button",{onClick:()=>{c([]),i("select")},className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Drop All"}),(0,a.jsx)("button",{onClick:()=>{i("amount")},disabled:0===o.length,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Proceed to Amount"})]})]}),"amount"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-2",children:"Total Amount to Split"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"₹"}),(0,a.jsx)("input",{type:"number",value:d,onChange:e=>m(Number(e.target.value)),className:"w-full bg-gray-50 text-gray-900 pl-8 pr-4 py-3 rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none",placeholder:"0.00"})]})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,a.jsx)("button",{onClick:()=>{let e=d/o.length;c(s=>s.map(s=>({...s,amount:e,isCustomAmount:!1})))},className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Split Equally"}),(0,a.jsx)("button",{onClick:()=>{c(e=>e.map(e=>({...e,amount:0,isCustomAmount:!0})))},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium transition-colors",children:"Custom Split"})]})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-64 p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:e.profilePhoto,alt:e.name,width:20,height:20,className:"rounded-full"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("h3",{className:"text-gray-900 font-medium truncate",children:e.name})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"₹"}),(0,a.jsx)("input",{type:"number",value:e.amount,onChange:s=>{var t,a;return t=e.id,a=Number(s.target.value),void c(e=>e.map(e=>e.id===t?{...e,amount:a,isCustomAmount:!0}:e))},className:"w-full bg-white text-gray-900 pl-8 pr-4 py-2 rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none",placeholder:"0.00"})]})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total:"}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(b?"text-green-500":"text-red-500"),children:["₹",f.toFixed(2)]})]}),(0,a.jsx)("button",{onClick:()=>{b&&(r(o,d),t())},disabled:!b||0===d,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Confirm Split"})]})]})]})})})})]})})}function G(e){let{isOpen:s,onClose:t,onSelectContact:r,friends:n}=e,[i,o]=(0,l.useState)(""),c=n.filter(e=>e.displayName.toLowerCase().includes(i.toLowerCase()));return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-t-3xl w-full max-w-md max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Friends"}),(0,a.jsx)("button",{onClick:t,className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,a.jsx)(y.A,{className:"w-5 h-5 text-gray-600"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search friends...",value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"space-y-3",children:c.length>0?(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:c.map(e=>(0,a.jsxs)("div",{onClick:()=>{r(e)},className:"flex flex-col items-center gap-3 p-4 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative w-16 h-16",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:e.pictureUrl||"https://randomuser.me/api/portraits/men/".concat(Math.floor(50*Math.random()),".jpg"),alt:e.displayName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/".concat(Math.floor(50*Math.random()),".jpg")}})}),Math.random()>.7&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:Math.floor(3*Math.random())+1})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.displayName}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500",children:e.statusMessage||"LINE Friend"})]})]},e.userId))}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No friends found"})})})})]})}):null}function Q(){let{onTabChange:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{user:s,friends:t,logout:n}=(0,r.A)(),[i,o]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[S,k]=(0,l.useState)(!1),[C,T]=(0,l.useState)(!1),[D,F]=(0,l.useState)(!1),[E,I]=(0,l.useState)(!1),[R,B]=(0,l.useState)(null),[_,O]=(0,l.useState)(null),[Q]=(0,l.useState)(3),H=(e,s,t)=>{console.log("Payment successful:",{txHash:e,recipient:s,amount:t}),B("Successfully sent ".concat(t," USDT to ").concat(s.displayName,"!")),setTimeout(()=>{B(null)},5e3)},J="0x1234567890abcdef1234567890abcdef12345678",q=async()=>{try{await navigator.clipboard.writeText(J),console.log("Wallet address copied to clipboard")}catch(e){console.error("Failed to copy wallet address:",e)}},$=async()=>{try{navigator.share?await navigator.share({title:"My Wallet Address",text:"My wallet address: ".concat(J),url:"ethereum:".concat(J)}):(await navigator.clipboard.writeText("My wallet address: ".concat(J)),console.log("Wallet address copied to clipboard for sharing"))}catch(e){console.error("Failed to share wallet address:",e)}};return(0,a.jsxs)("main",{className:"mx-auto max-w-md",children:[R&&(0,a.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 max-w-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:R})]})}),(0,a.jsxs)("header",{className:"pt-8 pb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 mb-8",children:[(0,a.jsx)("button",{onClick:()=>I(!0),className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden hover:ring-2 hover:ring-green-500 transition-all",children:(0,a.jsx)("img",{src:(null==s?void 0:s.pictureUrl)||"https://randomuser.me/api/portraits/men/0.jpg",alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/0.jpg"}})}),(0,a.jsxs)("button",{className:"relative w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),Q>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:Q>9?"9+":Q})]})]}),(0,a.jsxs)("div",{className:"px-6 mb-4",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900 mb-1",children:["Hello ",(null==s?void 0:s.displayName)||"User","!"]}),(0,a.jsx)("p",{className:"text-gray-500",children:"Let's save your money."})]})]}),(0,a.jsx)("section",{className:"px-6 mb-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg grid grid-cols-4 gap-3",children:[(0,a.jsx)(K,{onClick:()=>h(!0),icon:(0,a.jsx)(c.A,{className:"w-5 h-5"}),label:"QR Pay"}),(0,a.jsx)(K,{onClick:()=>j(!0),icon:(0,a.jsx)(d.A,{className:"w-5 h-5"}),label:"Pay anyone"}),(0,a.jsx)(K,{onClick:()=>k(!0),icon:(0,a.jsx)(m.A,{className:"w-5 h-5"}),label:"Split bills"}),(0,a.jsx)(K,{onClick:()=>T(!0),icon:(0,a.jsx)(x.A,{className:"w-5 h-5"}),label:"Bulk payment"})]})}),(0,a.jsxs)("section",{className:"px-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Recent Transaction"}),(0,a.jsx)("button",{onClick:()=>null==e?void 0:e("history"),className:"text-green-600 text-sm font-medium hover:text-green-700 transition-colors",children:"View All"})]}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2 pt-2 px-2",children:[{name:"Alice",id:5,gender:"women",notifications:2},{name:"Bob",id:6,gender:"men",notifications:0},{name:"Charlie",id:7,gender:"men",notifications:1},{name:"Diana",id:8,gender:"women",notifications:0},{name:"Eve",id:9,gender:"women",notifications:3}].map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 min-w-[60px]",children:[(0,a.jsxs)("div",{className:"relative w-12 h-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:"https://randomuser.me/api/portraits/".concat(e.gender,"/").concat(e.id,".jpg"),alt:e.name,className:"w-full h-full object-cover",onError:s=>{s.currentTarget.src="https://randomuser.me/api/portraits/lego/".concat(e.id,".jpg")}})}),e.notifications>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:e.notifications>9?"9+":e.notifications})]}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:e.name})]},s))})]}),(0,a.jsxs)("section",{className:"px-6 mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Friends"})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:[t.length>0?(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.slice(0,4).map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 rounded-xl hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"relative w-12 h-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:e.pictureUrl||"https://randomuser.me/api/portraits/men/".concat(s+1,".jpg"),alt:e.displayName,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/".concat(s+1,".jpg")}})}),Math.random()>.6&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:Math.floor(3*Math.random())+1})]}),(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900 text-center truncate",children:e.displayName})]},e.userId))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No friends found"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Add friends on LINE to see them here"})]}),(0,a.jsx)("button",{onClick:()=>F(!0),className:"w-full mt-4 py-3 text-green-600 text-sm font-medium border border-green-200 rounded-xl hover:bg-green-50 transition-colors",children:"View All"})]})]}),(0,a.jsxs)("section",{className:"px-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Invoices"}),(0,a.jsx)("button",{className:"text-green-600 text-sm font-medium hover:text-green-700 transition-colors",children:"View All"})]}),(0,a.jsx)("div",{className:"space-y-3",children:[{id:"INV-001",from:"Restaurant ABC",amount:"$45.50",status:"Pending",date:"2 hours ago"},{id:"INV-002",from:"Uber Ride",amount:"$12.30",status:"Paid",date:"1 day ago"},{id:"INV-003",from:"Coffee Shop",amount:"$8.75",status:"Overdue",date:"3 days ago"}].map((e,s)=>(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white font-bold text-sm",children:e.from.split(" ").map(e=>e[0]).join("")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.from}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.id," • ",e.date]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.amount}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat("Paid"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})]})]})},s))})]}),(0,a.jsx)("div",{className:"pb-24"}),(0,a.jsx)(p,{isOpen:i,onClose:()=>o(!1),onScan:e=>{console.log("QR Code scanned:",e)}}),(0,a.jsx)(M,{isOpen:g,onClose:()=>f(!1),onSelectContact:e=>{O(e),f(!1),y(!0)}}),(0,a.jsx)(A,{isOpen:b,onClose:()=>j(!1),onSuccess:H}),(0,a.jsx)(L,{isOpen:u,onClose:()=>h(!1),onSuccess:H}),(0,a.jsx)(P,{isOpen:S,onClose:()=>k(!1),onSuccess:e=>{console.log("Split bill created:",e),B('Split bill "'.concat(e.title,'" created successfully!')),setTimeout(()=>{B(null)},5e3)}}),(0,a.jsx)(U,{isOpen:C,onClose:()=>T(!1),onSuccess:e=>{console.log("Bulk payment successful:",e),B("Successfully sent ".concat(e.totalAmount," USDT to ").concat(e.recipients.length," recipients!")),setTimeout(()=>{B(null)},5e3)}}),(0,a.jsx)(W,{isOpen:v,onClose:()=>y(!1),contact:_,onPay:e=>{console.log("Pay to:",e)},onRequest:e=>{console.log("Request from:",e)}}),(0,a.jsx)(z,{isOpen:N,onClose:()=>w(!1),onConfirmSplit:(e,s)=>{console.log("Split bill:",e,s)}}),(0,a.jsx)(G,{isOpen:D,onClose:()=>F(!1),onSelectContact:e=>{O({id:e.userId,name:e.displayName,walletAddress:"",profilePhoto:e.pictureUrl||"",phoneNumber:""}),F(!1),y(!0)},friends:t}),E&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"w-full max-w-md mx-4 bg-white rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Profile"}),(0,a.jsx)("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-100 overflow-hidden mb-3",children:(0,a.jsx)("img",{src:(null==s?void 0:s.pictureUrl)||"https://randomuser.me/api/portraits/men/0.jpg",alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/0.jpg"}})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(null==s?void 0:s.displayName)||"LINE User"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(null==s?void 0:s.statusMessage)||"LINE DApp User"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("code",{className:"flex-1 text-xs text-gray-600 font-mono break-all",children:J}),(0,a.jsx)("button",{onClick:q,className:"p-2 text-gray-500 hover:text-green-600 transition-colors",title:"Copy wallet address",children:(0,a.jsx)(x.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"QR Code Actions"}),(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("canvas"),s=e.getContext("2d");e.width=200,e.height=200,s&&(s.fillStyle="#000",s.fillRect(0,0,200,200),s.fillStyle="#fff",s.font="12px Arial",s.textAlign="center",s.fillText("QR Code",100,100),s.fillText("Placeholder",100,120));let t=document.createElement("a");t.download="wallet-qr-code.png",t.href=e.toDataURL(),t.click()},className:"w-full flex items-center justify-center gap-3 p-3 bg-green-50 text-green-700 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Download QR Code"})]}),(0,a.jsxs)("button",{onClick:$,className:"w-full flex items-center justify-center gap-3 p-3 bg-blue-50 text-blue-700 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Share QR Code"})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:n,className:"w-full flex items-center justify-center gap-3 p-3 bg-red-50 text-red-700 rounded-lg border border-red-200 hover:bg-red-100 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,a.jsx)("span",{className:"font-medium",children:"Logout"})]})})]})]})})]})}function K(e){let{onClick:s,icon:t,label:r}=e;return(0,a.jsxs)("button",{onClick:s,className:"flex flex-col items-center gap-2 p-2 rounded-xl hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:t}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 text-center leading-tight",children:r})]})}var H=t(56701),J=t(34080);function q(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)(new Date().getMonth()),[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),x=(e,s)=>{let t=s.currentTarget.getBoundingClientRect();m({x:s.clientX-t.left,y:s.clientY-t.top}),c(e)},u=()=>{m(null),c(null)};return(0,l.useEffect)(()=>{i(!0)},[]),(0,a.jsxs)("main",{className:"mx-auto max-w-md px-4 pb-24 pt-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Transaction History"})}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[(0,a.jsx)("span",{className:"text-green-600",children:"$"}),"4,456.55"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Net Balance"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"overflow-x-auto pb-2",children:[(0,a.jsx)("div",{className:"flex items-end h-20 mb-2 relative min-w-max gap-2 px-2",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((t,r)=>{let l=[{receiving:5,spending:7},{receiving:8,spending:4},{receiving:12,spending:6},{receiving:9,spending:5},{receiving:11,spending:8},{receiving:8,spending:3},{receiving:6,spending:4},{receiving:10,spending:5},{receiving:12,spending:6},{receiving:4,spending:8},{receiving:7,spending:5},{receiving:9,spending:7}][r];return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 relative",children:[(0,a.jsxs)("div",{className:"flex flex-col items-end gap-0.5",children:[(0,a.jsx)("div",{className:"w-5 rounded-t-sm bg-gradient-to-t from-green-500 to-green-400 cursor-pointer hover:from-green-600 hover:to-green-500 transition-all",style:{height:"".concat(3*l.receiving,"px")},onMouseEnter:()=>s({month:t,type:"receiving",amount:1e3*l.receiving}),onMouseLeave:()=>s(null)}),(0,a.jsx)("div",{className:"w-5 rounded-t-sm bg-gradient-to-t from-red-500 to-red-400 cursor-pointer hover:from-red-600 hover:to-red-500 transition-all",style:{height:"".concat(3*l.spending,"px")},onMouseEnter:()=>s({month:t,type:"spending",amount:1e3*l.spending}),onMouseLeave:()=>s(null)})]}),e&&e.month===t&&(0,a.jsxs)("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap z-10",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-semibold",children:"receiving"===e.type?"Received":"Spent"}),(0,a.jsxs)("div",{children:["$",e.amount.toLocaleString()]})]}),(0,a.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]},t)})}),(0,a.jsx)("div",{className:"flex justify-between text-xs text-gray-500 px-2",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(e=>(0,a.jsx)("span",{className:"min-w-[24px] text-center",children:e},e))})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Analytics"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("button",{onClick:()=>r(e=>(e-1+12)%12),className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 min-w-[100px] text-center",children:["January","February","March","April","May","June","July","August","September","October","November","December"][t]}),(0,a.jsx)("button",{onClick:()=>r(e=>(e+1)%12),className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"2024"}),(0,a.jsx)("button",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative w-32 h-32",children:[d&&o&&(0,a.jsxs)("div",{className:"absolute z-10 bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg whitespace-nowrap transform -translate-x-1/2 -translate-y-full",style:{left:d.x,top:d.y-10},children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"font-medium mb-1",children:["received"===o&&"Received","sent"===o&&"Sent","available"===o&&"Available"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{children:["received"===o&&"40%","sent"===o&&"30%","available"===o&&"30%"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["received"===o&&"$40,911","sent"===o&&"$12,273","available"===o&&"$4,091"]})]})]}),(0,a.jsx)("div",{className:"absolute left-1/2 bottom-0 transform -translate-x-1/2 translate-y-full",children:(0,a.jsx)("div",{className:"border-solid border-t-gray-900 border-t-8 border-x-transparent border-x-8 border-b-0"})})]}),(0,a.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,a.jsx)("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"#E5E7EB",strokeWidth:"8",className:"opacity-25"}),(0,a.jsx)("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"#22C55E",strokeWidth:"8",strokeDasharray:"150.79 377",onMouseEnter:e=>x("received",e),onMouseLeave:u,className:"opacity-90 transition-all duration-[2000ms] ease-out cursor-pointer ".concat(n?"":"stroke-dashoffset-[377]"," ").concat("received"===o?"stroke-[#16A34A]":o?"opacity-50":"")}),(0,a.jsx)("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"#059669",strokeWidth:"8",strokeDasharray:"113.09 377",strokeDashoffset:"-150.79",onMouseEnter:e=>x("sent",e),onMouseLeave:u,className:"opacity-90 transition-all duration-[2000ms] ease-out delay-[600ms] cursor-pointer ".concat(n?"":"stroke-dashoffset-[377]"," ").concat("sent"===o?"stroke-[#047857]":o?"opacity-50":"")}),(0,a.jsx)("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"#10B981",strokeWidth:"8",strokeDasharray:"113.09 377",strokeDashoffset:"-263.88",onMouseEnter:e=>x("available",e),onMouseLeave:u,className:"opacity-90 transition-all duration-[2000ms] ease-out delay-[1200ms] cursor-pointer ".concat(n?"":"stroke-dashoffset-[377]"," ").concat("available"===o?"stroke-[#0D9488]":o?"opacity-50":"")})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total Balance"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:"$8,182"})]})})]}),(0,a.jsx)("div",{className:"flex-1 ml-8",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg transition-colors cursor-pointer ".concat("received"===o?"bg-green-50":""),onMouseEnter:()=>c("received"),onMouseLeave:()=>c(null),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 transition-colors ".concat("received"===o?"bg-[#16A34A]":o?"opacity-50":"")}),(0,a.jsx)("span",{className:"text-gray-600 transition-colors ".concat("received"===o?"text-gray-900":o?"opacity-50":""),children:"Received"})]}),(0,a.jsx)("span",{className:"text-gray-900 font-medium transition-opacity ".concat(o&&"received"!==o?"opacity-50":""),children:"$40,911"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg transition-colors cursor-pointer ".concat("sent"===o?"bg-emerald-50":""),onMouseEnter:()=>c("sent"),onMouseLeave:()=>c(null),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-600 transition-colors ".concat("sent"===o?"bg-[#047857]":o?"opacity-50":"")}),(0,a.jsx)("span",{className:"text-gray-600 transition-colors ".concat("sent"===o?"text-gray-900":o?"opacity-50":""),children:"Sent"})]}),(0,a.jsx)("span",{className:"text-gray-900 font-medium transition-opacity ".concat(o&&"sent"!==o?"opacity-50":""),children:"$12,273"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg transition-colors cursor-pointer ".concat("available"===o?"bg-emerald-50":""),onMouseEnter:()=>c("available"),onMouseLeave:()=>c(null),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500 transition-colors ".concat("available"===o?"bg-[#0D9488]":o?"opacity-50":"")}),(0,a.jsx)("span",{className:"text-gray-600 transition-colors ".concat("available"===o?"text-gray-900":o?"opacity-50":""),children:"Available"})]}),(0,a.jsx)("span",{className:"text-gray-900 font-medium transition-opacity ".concat(o&&"available"!==o?"opacity-50":""),children:"$4,091"})]})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Card Transactions"}),(0,a.jsx)("div",{className:"space-y-3",children:[{id:1,message:"Payment received from employer",category:"Income",amount:4e3,date:"01 Sep 24",icon:"\uD83D\uDCB0",senderAddress:"0x1234...5678...9ABC...DEF0",receiverAddress:null,senderName:"Tech Corp Inc.",senderImage:"https://api.dicebear.com/7.x/initials/svg?seed=TCI&backgroundColor=22c55e",receiverName:"John Doe",receiverImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John"},{id:2,message:"Dividend payout from investment portfolio",category:"Investment Income",amount:150,date:"30 Aug 24",icon:"\uD83D\uDCC8",senderAddress:"0xABCD...EFGH...IJKL...MNOP",receiverAddress:null,senderName:"Investment Fund",senderImage:"https://api.dicebear.com/7.x/initials/svg?seed=IF&backgroundColor=059669",receiverName:"John Doe",receiverImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John"},{id:3,message:"Freelance project completion payment",category:"Income",amount:200,date:"25 Aug 24",icon:"\uD83D\uDCBC",senderAddress:"0x9876...5432...1FED...CBA9",receiverAddress:null,senderName:"Sarah Wilson",senderImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah",receiverName:"John Doe",receiverImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John"},{id:4,message:"Payment sent for grocery purchase",category:"Food & Dining",amount:-85.5,date:"15 Sep 24",icon:"\uD83D\uDED2",senderAddress:null,receiverAddress:"0x5555...7777...9999...BBBB",senderName:"John Doe",senderImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",receiverName:"Fresh Mart",receiverImage:"https://api.dicebear.com/7.x/initials/svg?seed=FM&backgroundColor=10b981"},{id:5,message:"Payment sent for coffee order",category:"Food & Dining",amount:-12.75,date:"14 Sep 24",icon:"☕",senderAddress:null,receiverAddress:"0x3333...4444...5555...6666",senderName:"John Doe",senderImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",receiverName:"Coffee House",receiverImage:"https://api.dicebear.com/7.x/initials/svg?seed=CH&backgroundColor=047857"},{id:6,message:"Transfer received from friend",category:"Transfer",amount:250,date:"10 Sep 24",icon:"\uD83D\uDCB3",senderAddress:"0x7777...8888...9999...AAAA",receiverAddress:null,senderName:"Mike Johnson",senderImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mike",receiverName:"John Doe",receiverImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John"},{id:7,message:"Payment sent for dinner bill",category:"Food & Dining",amount:-45.2,date:"08 Sep 24",icon:"\uD83C\uDF7D️",senderAddress:null,receiverAddress:"0x2222...3333...4444...5555",senderName:"John Doe",senderImage:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",receiverName:"Fine Dining Restaurant",receiverImage:"https://api.dicebear.com/7.x/initials/svg?seed=FD&backgroundColor=166534"}].map(e=>(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:e.amount>0?e.senderImage:e.receiverImage,alt:e.amount>0?e.senderName:e.receiverName,className:"w-full h-full object-cover"})}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center ".concat(e.amount>0?"bg-green-100":"bg-red-100"),children:e.amount>0?(0,a.jsx)(H.A,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(J.A,{className:"w-4 h-4 text-red-600"})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.amount>0?e.senderName:e.receiverName})}),e.amount>0&&e.senderAddress&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:["From: ",e.senderAddress]}),e.amount<0&&e.receiverAddress&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 font-mono truncate mt-1",children:["To: ",e.receiverAddress]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 truncate mt-1",children:e.message})]}),(0,a.jsxs)("div",{className:"text-right flex-shrink-0 ml-2",children:[(0,a.jsxs)("div",{className:"font-semibold ".concat(e.amount>0?"text-green-600":"text-red-600"),children:["$",Math.abs(e.amount).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.date}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.amount>0?"Payment received":"Payment sent"})]})]})},e.id))})]})]})}function $(e){let{isOpen:s,onClose:t,onSelectAccount:r,accounts:n}=e;return(0,a.jsx)(u.e,{appear:!0,show:s,as:l.Fragment,children:(0,a.jsxs)(h.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsx)(u.e.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(h.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all",children:[(0,a.jsx)(h.lG.Title,{as:"h3",className:"text-lg font-semibold text-gray-900 mb-4",children:"Switch Account"}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>{r(e),t()},className:"w-full p-4 rounded-xl border ".concat(e.isActive?"border-green-500 bg-green-50":"border-gray-100"," hover:border-green-500 transition-colors"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(R.default,{src:"/next.svg",alt:e.network,width:24,height:24})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.network})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.balance}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]})]})},e.id))}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Cancel"})})]})})})})]})})}var V=t(86867),Y=t(10874),X=t(51691),Z=t(72019);function ee(e){let{className:s="",showBalance:t=!0,compact:n=!1}=e,{wallet:i,connectWallet:o,disconnectWallet:c,refreshWalletData:d,getTokenBalance:m}=(0,r.A)(),[x,u]=(0,l.useState)(null),[h,g]=(0,l.useState)(!1),p=async()=>{try{console.log("\uD83D\uDD17 Connecting wallet..."),console.log("\uD83D\uDCA1 DappPortal will show wallet creation UI if user has no wallet");let e=await o();e&&(console.log("✅ Wallet connected:",e),t&&j())}catch(e){console.error("❌ Wallet connection failed:",e)}},f=async()=>{try{await c(),u(null)}catch(e){console.error("Failed to disconnect wallet:",e)}},b=async()=>{try{await d(),i.isConnected&&t&&j()}catch(e){console.error("Failed to refresh wallet data:",e)}},j=async()=>{if(i.isConnected){g(!0);try{let e=await m(V.s1);u(e)}catch(e){console.error("Failed to load USDT balance:",e),u("0.00")}finally{g(!1)}}},v=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));return n?(0,a.jsx)("div",{className:"flex items-center gap-2 ".concat(s),children:i.isConnected?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-1.5 rounded-full text-sm",children:[(0,a.jsx)(S.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:v(i.address)})]}),(0,a.jsx)("button",{onClick:b,disabled:i.isLoading,className:"p-1.5 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 transition-colors",children:(0,a.jsx)(Y.A,{className:"w-4 h-4 ".concat(i.isLoading?"animate-spin":"")})})]}):(0,a.jsxs)("button",{onClick:p,disabled:i.isLoading,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors disabled:opacity-50",children:[i.isLoading?(0,a.jsx)(Y.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(X.A,{className:"w-4 h-4"}),"Setup Wallet"]})}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Kaia Testnet Wallet"}),i.isConnected&&(0,a.jsx)("button",{onClick:b,disabled:i.isLoading,className:"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 transition-colors",title:"Refresh wallet data",children:(0,a.jsx)(Y.A,{className:"w-5 h-5 ".concat(i.isLoading?"animate-spin":"")})})]}),i.error&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm",children:i.error})]}),i.isConnected?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Wallet Type"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:i.walletType?(e=>{switch(e){case V.S4.Liff:return"LINE Wallet";case V.S4.Web:return"Web Wallet";case V.S4.Extension:return"Browser Extension";case V.S4.Mobile:return"Mobile Wallet";case V.S4.OKX:return"OKX Wallet";case V.S4.BITGET:return"Bitget Wallet";default:return"Wallet"}})(i.walletType):"Unknown"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Address"}),(0,a.jsx)("span",{className:"text-sm font-mono text-gray-900",children:v(i.address)})]})]}),t&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"Balances"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-blue-600",children:"K"})}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"KAIA"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:i.isLoading?(0,a.jsx)(Y.A,{className:"w-4 h-4 animate-spin inline"}):"".concat(i.balance||"0.000000"," KAIA")}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Testnet"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.A,{className:"w-4 h-4 text-green-600"})}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"USDT"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:h?(0,a.jsx)(Y.A,{className:"w-4 h-4 animate-spin inline"}):"".concat(x||"0.00"," USDT")}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Testnet"})]})]}),null===x&&i.isConnected&&(0,a.jsx)("button",{onClick:j,disabled:h,className:"w-full text-blue-600 hover:text-blue-700 text-sm font-medium py-2 transition-colors",children:"Load Token Balances"})]}),(0,a.jsxs)("button",{onClick:f,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2.5 px-4 rounded-xl transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),"Disconnect Wallet"]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(X.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your Kaia testnet wallet will be created automatically when you log in"}),(0,a.jsx)("button",{onClick:p,disabled:i.isLoading,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-xl transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i.isLoading?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.A,{className:"w-5 h-5 animate-spin"}),"Setting up wallet..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.A,{className:"w-5 h-5"}),"Setup Wallet"]})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-700",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs",children:"This is Kaia testnet. Tokens have no real value."})]})})]})}var es=t(67016);class et{async checkBalance(){try{console.log("\uD83D\uDD0D Checking fee delegation service balance...");let e=this.apiKey?"".concat(this.serviceUrl,"/api/balance"):"".concat(this.serviceUrl,"/api/balance?address=").concat(f.PI.USDT_ADDRESS),s={"Content-Type":"application/json"};this.apiKey&&(s.Authorization="Bearer ".concat(this.apiKey));let t=await fetch(e,{method:"GET",headers:s}),a=await t.json();if(t.ok&&a.status)return{sufficient:!0===a.data,message:a.message||"Balance check completed"};return{sufficient:!1,message:a.message||"Failed to check balance"}}catch(e){return console.error("❌ Fee delegation balance check failed:",e),{sufficient:!1,message:e instanceof Error?e.message:"Unknown error"}}}async submitFeeDelegatedTransaction(e){try{var s,t;console.log("\uD83D\uDCE4 Submitting fee-delegated transaction to service...");let a={"Content-Type":"application/json"};this.apiKey&&(a.Authorization="Bearer ".concat(this.apiKey)),console.log("\uD83D\uDD17 Calling fee delegation service:",{url:"".concat(this.serviceUrl,"/api/signAsFeePayer"),hasApiKey:!!this.apiKey,txLength:e.length});let r=await fetch("".concat(this.serviceUrl,"/api/signAsFeePayer"),{method:"POST",headers:a,body:JSON.stringify({userSignedTx:{raw:e}})}),l=await r.json();if(console.log("\uD83D\uDCE5 Fee delegation service response:",{status:r.status,ok:r.ok,resultStatus:l.status,message:l.message}),!r.ok||!l.status)return{success:!1,error:l.error||"UNKNOWN_ERROR",message:l.data||l.message||"Fee delegation failed"};return{success:!0,transactionHash:(null==(s=l.data)?void 0:s.hash)||(null==(t=l.data)?void 0:t.transactionHash),transactionReceipt:l.data,message:l.message||"Transaction successful"}}catch(e){return console.error("❌ Fee delegation submission failed:",e),{success:!1,error:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error occurred"}}}createFaucetTransaction(e){return{type:es.zd.FeeDelegatedSmartContractExecution,from:e,to:f.PI.USDT_ADDRESS,value:"0x0",data:"0x0c11dedd",gasLimit:"0x186A0"}}createTransferTransaction(e,s,t){let a=s.slice(2).padStart(64,"0"),r=BigInt(t).toString(16).padStart(64,"0");return{type:es.zd.FeeDelegatedSmartContractExecution,from:e,to:f.PI.USDT_ADDRESS,value:"0x0",data:"0xa9059cbb"+a+r,gasLimit:"0x186A0"}}createApprovalTransaction(e,s,t){let a=s.slice(2).padStart(64,"0"),r=BigInt(t).toString(16).padStart(64,"0");return{type:es.zd.FeeDelegatedSmartContractExecution,from:e,to:f.PI.USDT_ADDRESS,value:"0x0",data:"0x095ea7b3"+a+r,gasLimit:"0x186A0"}}createValueTransferTransaction(e,s,t){return{type:es.zd.FeeDelegatedValueTransfer,from:e,to:s,value:(0,es.cA)(t).toString(),gasLimit:"0x7530"}}constructor(e){this.serviceUrl=f.PI.FEE_DELEGATION_URL,this.apiKey=e,console.log("\uD83D\uDD27 Fee Delegation Service initialized:",{serviceUrl:this.serviceUrl,hasApiKey:!!this.apiKey})}}let ea=null;class er{async executeGaslessFaucet(e){try{console.log("\uD83D\uDEB0 Executing gasless faucet request..."),await new Promise(e=>setTimeout(e,2e3));let e="0xfd"+Math.random().toString(16).substring(2,64);return console.log("✅ Gasless faucet successful:",e),{success:!0,transactionHash:e,gasless:!0}}catch(e){return console.error("❌ Gasless faucet failed:",e),{success:!1,error:e instanceof Error?e.message:"Gasless faucet failed",gasless:!1}}}async executeGaslessTransfer(e,s,t){try{console.log("\uD83D\uDCB8 Executing gasless USDT transfer...",{from:e,to:s,amount:t}),await new Promise(e=>setTimeout(e,3e3));let a="0xfd"+Math.random().toString(16).substring(2,64);return console.log("✅ Gasless transfer successful:",a),{success:!0,transactionHash:a,gasless:!0}}catch(e){return console.error("❌ Gasless transfer failed:",e),{success:!1,error:e instanceof Error?e.message:"Gasless transfer failed",gasless:!1}}}async isServiceAvailable(){try{return(await this.feeDelegationService.checkBalance()).sufficient}catch(e){return console.error("❌ Fee delegation service unavailable:",e),!1}}async getServiceStatus(){try{let e=await this.feeDelegationService.checkBalance();return{available:e.sufficient,message:e.message}}catch(e){return{available:!1,message:"Fee delegation service is currently unavailable"}}}constructor(e){this.provider=new es.FR(f.PI.RPC_URL),this.feeDelegationService=(ea||(ea=new et(e)),ea),console.log("⚡ Gasless Transaction Service initialized")}}let el=null;function en(){let{user:e,logout:s,wallet:t}=(0,r.A)(),[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),[u]=(0,l.useState)(3),[h,g]=(0,l.useState)(null),[p,f]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[N,S]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),[A,D]=(0,l.useState)(null),[F]=(0,l.useState)([{id:"1",name:"KAIA Network",network:"KAIA",balance:"$8,182.80",address:"0x1234...5678",isActive:!0},{id:"2",name:"BSC Network",network:"BSC",balance:"$12,345.67",address:"0xdef...789a",isActive:!1},{id:"3",name:"ETH Network",network:"ETH",balance:"$5,432.10",address:"0xabc...def0",isActive:!1}]),L=(0,l.useCallback)(async()=>{if(!t.address)return void g(null);f(!0);try{console.log("\uD83D\uDD0D Loading USDT balance for:",t.address);let e=await b(t.address);g(e),console.log("✅ USDT balance loaded:",e)}catch(e){console.error("❌ Failed to load USDT balance:",e),g(null)}finally{f(!1)}},[t.address]),E=(0,l.useCallback)(async()=>{try{let e=(el||(el=new er(void 0)),el),s=await e.getServiceStatus();D(s.available),console.log("Fee delegation service status:",s)}catch(e){console.error("Failed to check fee delegation service:",e),D(!1)}},[]);(0,l.useEffect)(()=>{t.isConnected&&t.address&&(L(),E())},[t.isConnected,t.address,L,E]);let I=async()=>{if(!t.address)return void S("Wallet not connected");y(!0),S(null),C(null);try{console.log("\uD83D\uDEB0 Requesting USDT from faucet...");let e=await j(t.address);if(e.success){let s=e.gasless?" ⚡ (Gasless)":" \uD83D\uDCB0 (Paid Gas)";C("Success! Transaction: ".concat(e.transactionHash).concat(s)),setTimeout(()=>{L()},5e3)}else S(e.error||"Faucet request failed")}catch(e){console.error("❌ Faucet request error:",e),S(e instanceof Error?e.message:"Unknown error")}finally{y(!1)}};(0,l.useEffect)(()=>{if(k||N){let e=setTimeout(()=>{C(null),S(null)},1e4);return()=>clearTimeout(e)}},[k,N]);let P=(0,l.useCallback)(e=>{console.log("Switching to account:",e)},[]),U=async()=>{let e=t.address||"0x1234567890abcdef1234567890abcdef12345678";try{await navigator.clipboard.writeText(e),console.log("Wallet address copied to clipboard")}catch(e){console.error("Failed to copy wallet address:",e)}},R=async()=>{let e=t.address||"0x1234567890abcdef1234567890abcdef12345678";try{navigator.share?await navigator.share({title:"My Wallet Address",text:"My wallet address: ".concat(e),url:"ethereum:".concat(e)}):(await navigator.clipboard.writeText("My wallet address: ".concat(e)),console.log("Wallet address copied to clipboard for sharing"))}catch(e){console.error("Failed to share wallet address:",e)}};return(0,a.jsxs)("main",{className:"mx-auto max-w-md",children:[(0,a.jsxs)("header",{className:"pt-8 pb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 mb-8",children:[(0,a.jsx)("button",{onClick:()=>d(!0),className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden hover:ring-2 hover:ring-green-500 transition-all",children:(0,a.jsx)("img",{src:(null==e?void 0:e.pictureUrl)||"https://randomuser.me/api/portraits/men/0.jpg",alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/0.jpg"}})}),(0,a.jsxs)("button",{className:"relative w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),u>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg border-2 border-white",children:u>9?"9+":u})]})]}),(0,a.jsxs)("div",{className:"px-6 mb-8",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900 mb-1",children:["Hello ",(null==e?void 0:e.displayName)||"User","!"]}),(0,a.jsx)("p",{className:"text-gray-500",children:"Let's manage your crypto wallet."})]}),(0,a.jsx)("div",{className:"px-6 mb-8",children:(0,a.jsx)(ee,{compact:!0,showBalance:!1})}),(0,a.jsxs)("div",{className:"px-4 mt-24 relative",children:[(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 transform -translate-y-16 -rotate-6 origin-top-left",children:(0,a.jsx)("div",{className:"bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-[28px] p-6 shadow-lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Balance"}),(0,a.jsx)("div",{className:"text-white text-[32px] font-normal",children:"$5,432.10"})]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Network"}),(0,a.jsx)("div",{className:"text-white text-xl font-normal",children:"ETH Network"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Address"}),(0,a.jsx)("div",{className:"text-white text-base font-light",children:"0xabc...def0"})]})]})]})})}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 transform -translate-y-8 -rotate-3 origin-top-left",children:(0,a.jsx)("div",{className:"bg-gradient-to-br from-amber-400 to-amber-500 rounded-[28px] p-6 shadow-lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Balance"}),(0,a.jsx)("div",{className:"text-white text-[32px] font-normal",children:"$12,345.67"})]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Network"}),(0,a.jsx)("div",{className:"text-white text-xl font-normal",children:"BSC Network"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Address"}),(0,a.jsx)("div",{className:"text-white text-base font-light",children:"0xdef...789a"})]})]})]})})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"bg-[#8A6FE8] rounded-[28px] p-6 relative",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Balance"}),(0,a.jsx)("div",{className:"text-white text-[32px] font-normal",children:t.isConnected&&t.balance?"".concat(t.balance," KAIA"):"Connect Wallet"})]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Network"}),(0,a.jsxs)("div",{className:"text-white text-xl font-normal",children:["Kaia Testnet",t.walletType&&(0,a.jsx)("span",{className:"text-sm text-white/70 block",children:"Liff"===t.walletType?"LINE Wallet":t.walletType})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-white/90 text-base font-light mb-1",children:"Address"}),(0,a.jsx)("div",{className:"text-white text-base font-light",children:t.address?"".concat(t.address.slice(0,6),"...").concat(t.address.slice(-4)):"Not Connected"})]})]})]})})})]}),(0,a.jsxs)("div",{className:"flex justify-end px-4 mt-6 gap-3",children:[(0,a.jsxs)("button",{onClick:()=>i(!0),className:"border border-green-500 text-green-500 hover:bg-green-50 flex items-center gap-2 px-6 py-3 rounded-full transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),(0,a.jsx)("span",{className:"text-lg font-normal",children:"Switch Account"})]}),(0,a.jsxs)("button",{className:"bg-green-500 text-white flex items-center gap-2 px-6 py-3 rounded-full hover:bg-green-600 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,a.jsx)("span",{className:"text-lg font-normal",children:"Add Account"})]})]}),(0,a.jsx)($,{isOpen:n,onClose:()=>i(!1),onSelectAccount:P,accounts:F}),o&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"w-full max-w-md mx-4 bg-white rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Profile"}),(0,a.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-100 overflow-hidden mb-3",children:(0,a.jsx)("img",{src:(null==e?void 0:e.pictureUrl)||"https://randomuser.me/api/portraits/men/0.jpg",alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://randomuser.me/api/portraits/women/0.jpg"}})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(null==e?void 0:e.displayName)||"LINE User"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(null==e?void 0:e.statusMessage)||"LINE DApp User"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("code",{className:"flex-1 text-xs text-gray-600 font-mono break-all",children:t.address||"Not connected"}),(0,a.jsx)("button",{onClick:U,disabled:!t.address,className:"p-2 text-gray-500 hover:text-green-600 transition-colors disabled:opacity-50",title:"Copy wallet address",children:(0,a.jsx)(x.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"QR Code Actions"}),(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("canvas"),s=e.getContext("2d");e.width=200,e.height=200,s&&(s.fillStyle="#000",s.fillRect(0,0,200,200),s.fillStyle="#fff",s.font="12px Arial",s.textAlign="center",s.fillText("QR Code",100,100),s.fillText("Placeholder",100,120));let t=document.createElement("a");t.download="wallet-qr-code.png",t.href=e.toDataURL(),t.click()},className:"w-full flex items-center justify-center gap-3 p-3 bg-green-50 text-green-700 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Download QR Code"})]}),(0,a.jsxs)("button",{onClick:R,className:"w-full flex items-center justify-center gap-3 p-3 bg-blue-50 text-blue-700 rounded-lg border border-blue-200 hover:bg-blue-100 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Share QR Code"})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:()=>{s(),d(!1)},className:"w-full flex items-center justify-center gap-3 p-3 bg-red-50 text-red-700 rounded-lg border border-red-200 hover:bg-red-100 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,a.jsx)("span",{className:"font-medium",children:"Sign Out"})]})})]})]})}),t.isConnected&&(0,a.jsx)("div",{className:"mt-8 px-4",children:(0,a.jsx)(ee,{showBalance:!0,compact:!1})}),t.isConnected&&(0,a.jsx)("div",{className:"mt-8 px-4",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-bold text-sm",children:"⚡"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-900 font-medium",children:"Gasless Transactions"}),(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:null===A?"Checking...":A?"Available - No gas fees!":"Unavailable - Regular gas fees apply"})]})]}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(null===A?"bg-gray-300":A?"bg-green-500":"bg-red-500")})]})})}),(0,a.jsxs)("div",{className:"mt-12 px-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"My Assets"}),t.isConnected?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 mb-4 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-bold text-sm",children:"K"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:"KAIA"}),(0,a.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"Testnet"})]}),(0,a.jsxs)("div",{className:"text-gray-500 text-sm",children:[t.balance||"0.000000"," KAIA"]})]})]}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Testnet"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 font-bold text-sm",children:"$"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:"USDT"}),(0,a.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"Testnet"}),p&&(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})]}),(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:p?"Loading...":h?"".concat(h.balance," USDT"):"0.00 USDT"})]})]}),(0,a.jsxs)("button",{onClick:I,disabled:v||!t.address,className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 hover:bg-green-600 text-white text-xs font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(w.A,{className:"w-4 h-4"}),v?"Getting...":"Get USDT"]})]}),k&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-green-800 text-sm font-medium",children:"✅ Faucet Success!"}),(0,a.jsx)("p",{className:"text-green-700 text-xs mt-1 break-all",children:k})]}),N&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-red-800 text-sm font-medium",children:"❌ Faucet Error"}),(0,a.jsx)("p",{className:"text-red-700 text-xs mt-1",children:N})]})]})]}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"Connect your wallet to view assets"})})]})]}),t.address&&(0,a.jsx)("section",{className:"px-6 mb-6",children:(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 font-medium ",children:"Receive"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Share your wallet address"})]}),(0,a.jsx)("div",{className:"w-24 h-24 flex items-center justify-center bg-white rounded-lg",children:(0,a.jsx)(T.X,{value:t.address,size:92})})]})})]})}function ei(){let[e,s]=(0,l.useState)("home"),[t,r]=(0,l.useState)(!1),c=t=>{t!==e&&(r(!0),setTimeout(()=>{s(t),r(!1)},150))};return(0,a.jsxs)("div",{className:"min-h-dvh flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"flex-1 min-h-0 relative",children:t?(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):(()=>{switch(e){case"home":default:return(0,a.jsx)("div",{className:"animate-fadeIn",children:(0,a.jsx)(Q,{onTabChange:c})},"home");case"history":return(0,a.jsx)("div",{className:"animate-fadeIn",children:(0,a.jsx)(q,{})},"history");case"portfolio":return(0,a.jsx)("div",{className:"animate-fadeIn",children:(0,a.jsx)(en,{})},"portfolio")}})()}),(0,a.jsx)("nav",{className:"sticky bottom-0 inset-x-0 mb-6",children:(0,a.jsx)("div",{className:"mx-auto max-w-md",children:(0,a.jsxs)("div",{className:"bg-white backdrop-blur-sm rounded-full flex justify-between items-center text-xs px-2 py-2 shadow-2xl border border-gray-200 mx-4",children:[(0,a.jsx)(eo,{tab:"home",active:"home"===e,onClick:()=>c("home"),label:"Home",children:(0,a.jsx)(n.A,{className:"w-6 h-6"})}),(0,a.jsx)(eo,{tab:"history",active:"history"===e,onClick:()=>c("history"),label:"History",children:(0,a.jsx)(i.A,{className:"w-6 h-6"})}),(0,a.jsx)(eo,{tab:"portfolio",active:"portfolio"===e,onClick:()=>c("portfolio"),label:"Profile",children:(0,a.jsx)(o.A,{className:"w-6 h-6"})})]})})})]})}function eo(e){let{active:s,onClick:t,label:r,children:l}=e;return(0,a.jsxs)("button",{onClick:t,className:"flex items-center gap-2 transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ".concat(s?"bg-green-100 text-green-600 shadow-lg shadow-green-100/25":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:l}),(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(s?"w-16 opacity-100":"w-0 opacity-0"),children:(0,a.jsx)("span",{className:"text-sm font-medium whitespace-nowrap text-gray-900",children:r})})]})}var ec=t(80238),ed=t(33275);function em(){let{isAuthenticated:e,isLoading:s}=(0,r.A)();return s?(0,a.jsx)(ed.A,{message:"Loading..."}):e?(0,a.jsx)(ei,{}):(0,a.jsx)(ec.default,{})}},73776:()=>{},79368:()=>{}},e=>{e.O(0,[4935,6793,2932,4590,2896,1029,3845,2626,238,8441,1255,7358],()=>e(e.s=59137)),_N_E=e.O()}]);